###############################################################################
# Copyright (c) 2022-25, Lawrence Livermore National Security, LLC and RADIUSS
# project contributors. See the COPYRIGHT file for details.
#
# SPDX-License-Identifier: (MIT)
###############################################################################

# Example .gitlab/custom-variables.yml
#
# This file defines project-specific VARIABLES ONLY.
# It should be included in the PARENT pipeline (.gitlab-ci.yml) to provide
# variables that are passed as component inputs and forwarded to child pipelines.
#
# Place this file at .gitlab/custom-variables.yml in your project.
#
# Notes:
# - The values here are sensible defaults, inspired by Umpire production setup.
# - The <MACHINE>_SHARED_ALLOC is optional. If left empty or removed, the CI
#   won't share a top level allocation (although this is recommended).

###############################################################################
# MACHINE-SPECIFIC ALLOCATION VARIABLES
###############################################################################

variables:
  # Dane (SLURM) allocation settings
  DANE_SHARED_ALLOC: "--nodes=1 --exclusive --reservation=ci --time=30"
  DANE_JOB_ALLOC: "--nodes=1 --reservation=ci"
  DANE_PERF_ALLOC: "--nodes=1 --exclusive --reservation=ci --time=15"

  # Matrix (SLURM) allocation settings
  MATRIX_SHARED_ALLOC: "--nodes=1 --exclusive --partition=pdebug --time=30"
  MATRIX_JOB_ALLOC: "--nodes=1 --partition=pdebug"
  MATRIX_PERF_ALLOC: "--nodes=1 --exclusive --partition=pdebug -t 15"

  # Corona (flux) allocation settings
  CORONA_SHARED_ALLOC: "--nodes=1 --exclusive --time-limit=30m -o per-resource.count=2"
  CORONA_JOB_ALLOC: "--nodes=1 --begin-time=+5s"
  CORONA_PERF_ALLOC: "--nodes=1 --exclusive --time-limit=15m"

  # Tioga (flux) allocation settings
  TIOGA_SHARED_ALLOC: "--nodes=1 --exclusive --time-limit=30m -o per-resource.count=2"
  TIOGA_JOB_ALLOC: "--nodes=1 --begin-time=+5s"
  TIOGA_PERF_ALLOC: "--nodes=1 --exclusive --time-limit=15m"

  # Tuolumne (flux) allocation settings
  TUOLUMNE_SHARED_ALLOC: "--nodes=1 --exclusive --time-limit=30m -o per-resource.count=2"
  TUOLUMNE_JOB_ALLOC: "--nodes=1 --begin-time=+5s"
  TUOLUMNE_PERF_ALLOC: "--nodes=1 --exclusive --time-limit=15m"

  # Allocation name (used for shared allocations)
  ALLOC_NAME: "ALLOC_${CI_PIPELINE_ID}"
