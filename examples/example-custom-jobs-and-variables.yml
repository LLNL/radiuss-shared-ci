###############################################################################
# Copyright (c) 2022-25, Lawrence Livermore National Security, LLC and RADIUSS
# project contributors. See the COPYRIGHT file for details.
#
# SPDX-License-Identifier: (MIT)
###############################################################################

# Example .gitlab/custom-jobs-and-variables.yml
#
# This file defines project-specific variables and job customizations.
# Place this file at .gitlab/custom-jobs-and-variables.yml in your project.

###############################################################################
# MACHINE-SPECIFIC ALLOCATION VARIABLES
###############################################################################

variables:
  # Dane (SLURM) allocation settings
  DANE_SHARED_ALLOC: "-N 1 -p pdebug -t 30"
  DANE_JOB_ALLOC: "-n 1"
  DANE_PERF_ALLOC: "-N 1 -p pbatch -t 60"

  # Matrix (SLURM) allocation settings
  MATRIX_SHARED_ALLOC: "-N 1 -p pdebug -t 30"
  MATRIX_JOB_ALLOC: "-n 1"
  MATRIX_PERF_ALLOC: "-N 1 -p pbatch -t 60"

  # Corona (flux) allocation settings
  CORONA_SHARED_ALLOC: "-N 1 -t 30m"
  CORONA_JOB_ALLOC: "-N 1 -t 10m"
  CORONA_PERF_ALLOC: "-N 1 -t 60m"

  # Tioga (flux) allocation settings
  TIOGA_SHARED_ALLOC: "-N 1 -t 30m"
  TIOGA_JOB_ALLOC: "-N 1 -t 10m"
  TIOGA_PERF_ALLOC: "-N 1 -t 60m"

  # Tuolumne (flux) allocation settings
  TUOLUMNE_SHARED_ALLOC: "-N 1 -t 30m"
  TUOLUMNE_JOB_ALLOC: "-N 1 -t 10m"
  TUOLUMNE_PERF_ALLOC: "-N 1 -t 60m"

  # Lassen (LSF) allocation settings
  LASSEN_JOB_ALLOC: "1 -W 30"
  LASSEN_PERF_ALLOC: "1 -W 60"

  # Allocation name (used for shared allocations)
  ALLOC_NAME: "ALLOC_${CI_PIPELINE_ID}"

###############################################################################
# JOB CUSTOMIZATION TEMPLATES
###############################################################################

# Custom job template - extend this to add project-specific setup
.custom_job:
  before_script:
    - echo "Setting up build environment..."
    # Add any project-specific setup here
    # - module load gcc
    # - export CC=gcc CXX=g++

# Custom performance job template
.custom_perf:
  before_script:
    - echo "Setting up performance test environment..."
    # Add any performance-specific setup here

###############################################################################
# REPRODUCER VARIABLES (Optional)
###############################################################################

# Override reproducer variables for specific machines if needed
# This allows you to add project-specific environment variables
# that should appear in the reproducer output

# Example for Lassen:
# .lassen_reproducer_vars:
#   script:
#     - |
#       echo -e "export MY_VAR=\"${MY_VAR}\""
#       echo -e "export ANOTHER_VAR=\"${ANOTHER_VAR}\""
