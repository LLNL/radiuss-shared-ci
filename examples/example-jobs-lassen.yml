###############################################################################
# Copyright (c) 2022-25, Lawrence Livermore National Security, LLC and RADIUSS
# project contributors. See the COPYRIGHT file for details.
#
# SPDX-License-Identifier: (MIT)
###############################################################################

# Example .gitlab/jobs/lassen.yml
#
# This file defines project-specific jobs for the Lassen machine.
# Place this file at .gitlab/jobs/lassen.yml in your project.

###############################################################################
# BUILD AND TEST JOBS
###############################################################################

# Example job: GCC build
gcc-build:
  extends: .job_on_lassen
  variables:
    COMPILER: "gcc"
    COMPILER_VERSION: "8.3.1"

# Example job: Clang build
clang-build:
  extends: .job_on_lassen
  variables:
    COMPILER: "clang"
    COMPILER_VERSION: "10.0.1"

# Example job: XL build
xl-build:
  extends: .job_on_lassen
  variables:
    COMPILER: "xl"
    COMPILER_VERSION: "16.1.1"
  # Mark as advanced job (only runs on main/develop unless ALL_TARGETS=ON)
  variables:
    ADVANCED_JOB: "ON"

# Example job: CUDA build
cuda-build:
  extends: .job_on_lassen
  stage: jobs-stage-2  # Run in second stage
  variables:
    COMPILER: "gcc"
    COMPILER_VERSION: "8.3.1"
    ENABLE_CUDA: "ON"
    CUDA_VERSION: "11.2.0"
